<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chemical Analysis App</title>
    <script src="https://unpkg.com/react@17.0.2/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17.0.2/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        border: "hsl(var(--border))",
                        input: "hsl(var(--input))",
                        ring: "hsl(var(--ring))",
                        background: "hsl(var(--background))",
                        foreground: "hsl(var(--foreground))",
                        primary: {
                            DEFAULT: "hsl(var(--primary))",
                            foreground: "hsl(var(--primary-foreground))",
                        },
                        secondary: {
                            DEFAULT: "hsl(var(--secondary))",
                            foreground: "hsl(var(--secondary-foreground))",
                        },
                        destructive: {
                            DEFAULT: "hsl(var(--destructive))",
                            foreground: "hsl(var(--destructive-foreground))",
                        },
                        muted: {
                            DEFAULT: "hsl(var(--muted))",
                            foreground: "hsl(var(--muted-foreground))",
                        },
                        accent: {
                            DEFAULT: "hsl(var(--accent))",
                            foreground: "hsl(var(--accent-foreground))",
                        },
                        popover: {
                            DEFAULT: "hsl(var(--popover))",
                            foreground: "hsl(var(--popover-foreground))",
                        },
                        card: {
                            DEFAULT: "hsl(var(--card))",
                            foreground: "hsl(var(--card-foreground))",
                        },
                    },
                    borderRadius: {
                        lg: "var(--radius)",
                        md: "calc(var(--radius) - 2px)",
                        sm: "calc(var(--radius) - 4px)",
                    },
                },
            },
        }
    </script>
    <style>
        @layer base {
            :root {
                --background: 0 0% 100%;
                --foreground: 222.2 84% 4.9%;
                --card: 0 0% 100%;
                --card-foreground: 222.2 84% 4.9%;
                --popover: 0 0% 100%;
                --popover-foreground: 222.2 84% 4.9%;
                --primary: 222.2 47.4% 11.2%;
                --primary-foreground: 210 40% 98%;
                --secondary: 210 40% 96.1%;
                --secondary-foreground: 222.2 47.4% 11.2%;
                --muted: 210 40% 96.1%;
                --muted-foreground: 215.4 16.3% 46.9%;
                --accent: 210 40% 96.1%;
                --accent-foreground: 222.2 47.4% 11.2%;
                --destructive: 0 84.2% 60.2%;
                --destructive-foreground: 210 40% 98%;
                --border: 214.3 31.8% 91.4%;
                --input: 214.3 31.8% 91.4%;
                --ring: 222.2 84% 4.9%;
                --radius: 0.5rem;
            }
            .dark {
                --background: 222.2 84% 4.9%;
                --foreground: 210 40% 98%;
                --card: 222.2 84% 4.9%;
                --card-foreground: 210 40% 98%;
                --popover: 222.2 84% 4.9%;
                --popover-foreground: 210 40% 98%;
                --primary: 210 40% 98%;
                --primary-foreground: 222.2 47.4% 11.2%;
                --secondary: 217.2 32.6% 17.5%;
                --secondary-foreground: 210 40% 98%;
                --muted: 217.2 32.6% 17.5%;
                --muted-foreground: 215 20.2% 65.1%;
                --accent: 217.2 32.6% 17.5%;
                --accent-foreground: 210 40% 98%;
                --destructive: 0 62.8% 30.6%;
                --destructive-foreground: 210 40% 98%;
                --border: 217.2 32.6% 17.5%;
                --input: 217.2 32.6% 17.5%;
                --ring: 212.7 26.8% 83.9%;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const Button = React.forwardRef(({ className, ...props }, ref) => {
            return (
                <button
                    className={`inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2 ${className}`}
                    ref={ref}
                    {...props}
                />
            )
        })

        const Input = React.forwardRef(({ className, type, ...props }, ref) => {
            return (
                <input
                    type={type}
                    className={`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`}
                    ref={ref}
                    {...props}
                />
            )
        })

        const Label = React.forwardRef(({ className, ...props }, ref) => (
            <label
                ref={ref}
                className={`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${className}`}
                {...props}
            />
        ))

        const Card = React.forwardRef(({ className, ...props }, ref) => (
            <div
                ref={ref}
                className={`rounded-lg border bg-card text-card-foreground shadow-sm ${className}`}
                {...props}
            />
        ))

        const CardHeader = React.forwardRef(({ className, ...props }, ref) => (
            <div
                ref={ref}
                className={`flex flex-col space-y-1.5 p-6 ${className}`}
                {...props}
            />
        ))

        const CardTitle = React.forwardRef(({ className, ...props }, ref) => (
            <h3
                ref={ref}
                className={`text-2xl font-semibold leading-none tracking-tight ${className}`}
                {...props}
            />
        ))

        const CardContent = React.forwardRef(({ className, ...props }, ref) => (
            <div ref={ref} className={`p-6 pt-0 ${className}`} {...props} />
        ))

        const Download = ({ className }) => (
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
                className={className}
            >
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="7 10 12 15 17 10" />
                <line x1="12" x2="12" y1="15" y2="3" />
            </svg>
        )

        const Search = ({ className }) => (
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                strokeWidth="2"
                strokeLinecap="round"
                strokeLinejoin="round"
                className={className}
            >
                <circle cx="11" cy="11" r="8" />
                <path d="m21 21-4.3-4.3" />
            </svg>
        )

        // Simulated functions (these would need to be replaced with actual API calls to a backend service)
        const detectFunctionalGroups = (smiles) => {
            const groups = []
            if (smiles.includes('O')) groups.push('Alcohol')
            if (smiles.includes('C(=O)O')) groups.push('Carboxylic Acid')
            if (smiles.includes('C(=O)C')) groups.push('Ketone')
            if (smiles.includes('C(=O)H')) groups.push('Aldehyde')
            if (smiles.includes('N')) groups.push('Amine')
            return groups
        }

        const generateIupacName = (smiles) => {
            const map = { 'CCO': 'Ethanol', 'CC(=O)O': 'Acetic acid', 'CCC': 'Propane' }
            return map[smiles] || 'Unknown compound'
        }

        const getMolecularProperties = (smiles) => {
            return {
                formula: smiles.replace(/\$\$|\$\$/g, ''),
                molarMass: (smiles.length * 10).toFixed(2)
            }
        }

        const simulateReactions = (smiles) => {
            return {
                grignard: 'R-OH',
                cracking: 'C2H6',
                carboxylation: 'R-COOH'
            }
        }

        function ChemicalAnalysisApp() {
            const [smiles, setSmiles] = React.useState('')
            const [analysis, setAnalysis] = React.useState(null)

            const handleAnalyze = () => {
                const functionalGroups = detectFunctionalGroups(smiles)
                const iupacName = generateIupacName(smiles)
                const properties = getMolecularProperties(smiles)
                const reactions = simulateReactions(smiles)

                setAnalysis({
                    functionalGroups,
                    iupacName,
                    properties,
                    reactions
                })
            }

            const handleDownload = () => {
                if (!analysis) return

                const content = `
IUPAC Name: ${analysis.iupacName}
SMILES: ${smiles}
Molecular Formula: ${analysis.properties.formula}
Molar Mass: ${analysis.properties.molarMass} g/mol
Functional Groups: ${analysis.functionalGroups.join(', ')}
Grignard Reaction Product: ${analysis.reactions.grignard}
Hydrocarbon Cracking Product: ${analysis.reactions.cracking}
Carboxylation Reaction Product: ${analysis.reactions.carboxylation}
                `.trim()

                const blob = new Blob([content], { type: 'text/plain' })
                const url = URL.createObjectURL(blob)
                const a = document.createElement('a')
                a.href = url
                a.download = `${analysis.iupacName.replace(/\s+/g, '_')}_analysis.txt`
                document.body.appendChild(a)
                a.click()
                document.body.removeChild(a)
                URL.revokeObjectURL(url)
            }

            return (
                <div className="container mx-auto p-4 bg-gradient-to-br from-purple-100 to-blue-100 min-h-screen">
                    <h1 className="text-4xl font-bold mb-8 text-center text-purple-800">Chemical Analysis App</h1>
                    <Card className="mb-8 shadow-lg">
                        <CardHeader>
                            <CardTitle>Enter SMILES Notation</CardTitle>
                        </CardHeader>
                        <CardContent>
                            <div className="flex gap-4">
                                <Input
                                    type="text"
                                    value={smiles}
                                    onChange={(e) => setSmiles(e.target.value)}
                                    placeholder="e.g., CCO for ethanol"
                                    className="flex-grow"
                                    aria-label="SMILES notation input"
                                />
                                <Button onClick={handleAnalyze} className="bg-purple-600 hover:bg-purple-700">
                                    <Search className="mr-2 h-4 w-4" /> Analyze
                                </Button>
                            </div>
                        </CardContent>
                    </Card>

                    {analysis && (
                        <Card className="mb-8 shadow-lg">
                            <CardHeader>
                                <CardTitle>Analysis Results</CardTitle>
                            </CardHeader>
                            <CardContent>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <h3 className="text-lg font-semibold mb-2">Compound Information</h3>
                                        <p><strong>IUPAC Name:</strong> {analysis.iupacName}</p>
                                        <p><strong>Molecular Formula:</strong> {analysis.properties.formula}</p>
                                        <p><strong>Molar Mass:</strong> {analysis.properties.molarMass} g/mol</p>
                                        <p><strong>Functional Groups:</strong> {analysis.functionalGroups.join(', ')}</p>
                                    </div>
                                    <div>
                                        <h3 className="text-lg font-semibold mb-2">Simulated Reactions</h3>
                                        <p><strong>Grignard Reaction:</strong>   {analysis.reactions.grignard}</p>
                                        <p><strong>Hydrocarbon Cracking:</strong> {analysis.reactions.cracking}</p>
                                        <p><strong>Carboxylation:</strong> {analysis.reactions.carboxylation}</p>
                                    </div>
                                </div>
                                <div className="mt-4">
                                    <Button onClick={handleDownload} className="bg-green-600 hover:bg-green-700">
                                        <Download className="mr-2 h-4 w-4" /> Download Analysis
                                    </Button>
                                </div>
                            </CardContent>
                        </Card>
                    )}

                    <Card className="shadow-lg">
                        <CardHeader>
                            <CardTitle>Molecule Visualization</CardTitle>
                        </CardHeader>
                        <CardContent className="flex justify-center">
                            {smiles && (
                                <img
                                    src={`https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/smiles/${encodeURIComponent(smiles)}/PNG`}
                                    alt={`Structure of ${smiles}`}
                                    className="max-w-full h-auto"
                                />
                            )}
                        </CardContent>
                    </Card>
                </div>
            )
        }

        ReactDOM.render(<ChemicalAnalysisApp />, document.getElementById('root'))
    </script>
</body>
</html>